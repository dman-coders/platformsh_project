entity.metric.settings:
  path: 'admin/structure/metric'
  defaults:
    _form: '\Drupal\platformsh_project\Form\MetricSettingsForm'
    _title: 'Metric'
  requirements:
    _permission: 'administer metrics'

# Interstitial config form fired during an action
# to request info about what type of metric to create.
# maybe should be similar to /metric/add

add_metric_action.form:
  path: /admin/add_metric_action
  defaults:
    _title: Add Metric
    _form: \Drupal\platformsh_project\Form\AddMetricActionForm
  options:
    _admin_route: TRUE
  requirements:
    _permission: 'administer metrics'

# This route is actually auto-generated by the `add_page` @links on the `Metric` object.route_callbacks:
# BUT it was not getting the controller correct. Need to use the addPage
metric.add_unknown_metric_to_project:
  path: '/node/{project}/metric/add'
  defaults:
    _title: 'Add Metric to project'
    _controller: '\Drupal\platformsh_project\Controller\MetricController::addPage'
    entity_type_id: metric
  requirements:
    _permission: 'administer metrics'
  options:
    parameters:
      project:
        type: entity:node


metric.add_known_metric_to_project:
  path: '/node/{project}/metric/add/{metric_type}'
  defaults:
    _title: Add Metric
    _form: \Drupal\platformsh_project\Form\MetricForm
    # By defining the _entity_form controller,
    # the system should be told to use the rest of the features
    # that are set up when editing a normal contentEntityForm:,
    _controller: 'controller.entity_form:getContentResult'
    _entity_form: metric.add
  requirements:
    _permission: 'administer metrics'
  options:
    parameters:
      project:
        type: entity:node
      metric_type:
        type: entity:metric_type
